
		if (userTrap){
						uint32* ptr_page_table=NULL;

						uint32 permissions=pt_get_page_permissions(faulted_env->env_page_directory,fault_va);

						if (fault_va >= USER_HEAP_START && fault_va <= USER_HEAP_MAX) {
							if((permissions & PERM_AVAILABLE)==0 /*&& (permissions & PERM_PRESENT)!=0*/){
								sched_kill_env(faulted_env->env_id);
							}
						}

					  if (CHECK_IF_KERNEL_ADDRESS(fault_va)){
						  cprintf("I'm here\n");
						  sched_kill_env(faulted_env->env_id);
					  }
								    // Check if it exists but with read-only permissions
				    permissions = pt_get_page_permissions(faulted_env->env_page_directory, fault_va);
					if (((permissions & PERM_PRESENT) == 1 && (permissions & PERM_WRITEABLE )== 0)) {
								        // Invalid page, kill the process
								    	sched_kill_env(faulted_env->env_id);

				   }
			}
